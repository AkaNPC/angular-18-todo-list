<form class="form" *ngIf="!todoService.isFormHidden" [formGroup]="todoService.taskForm">
    <!-- Поля для вкладки Задач -->
    <fieldset class="form__task-input" *ngIf="todoService.currentPage === 'tasks'">
        <label for="task-title">Название</label>
        <input class="form__task-title" name="task-title" type="text" formControlName="name">
        <span class="form__validation-message">
            <p *ngIf="todoService.taskForm.controls['name'].errors?.['pattern']">
                Недопустимые символы. Проверьте еще раз.</p>
            <p
                *ngIf="todoService.taskForm.controls['name'].touched && todoService.taskForm.controls['name'].errors?.['required']">
                Заполните пустое поле</p>
            <p
                *ngIf="todoService.taskForm.controls['name'].touched && todoService.taskForm.controls['name'].errors?.['minlength'] && (todoService.taskForm.controls['name'].dirty)">
                Нужно ввести минимум 5 символов</p>
        </span>
        <label for="task-description">Описание</label>
        <input class="form__task-description" name="task-description" type="text" formControlName="description">
        <span class="form__validation-message">
            <p *ngIf="todoService.taskForm.controls['description'].errors?.['pattern']">
                Недопустимые символы. Проверьте еще раз.</p>
            <p
                *ngIf="todoService.taskForm.controls['description'].touched && todoService.taskForm.controls['description'].errors?.['required']">
                Заполните пустое поле</p>
            <p
                *ngIf="todoService.taskForm.controls['description'].touched && todoService.taskForm.controls['description'].errors?.['minlength'] && (todoService.taskForm.controls['description'].dirty)">
                Нужно ввести минимум 4 символа</p>
        </span>

        <div class="form__task-input-date-time">
            <button class="small-btn" (click)="todoService.toggleDateTimeFields()">Назначить дату и время</button>

            <label for="event-date">Дата напоминания</label>
            <input class="form__event-date" name="event-date" type="date" formControlName="endDate">
            <span class="form__validation-message">
                <p
                    *ngIf="todoService.taskForm.controls['endDate'].touched && todoService.taskForm.controls['endDate'].errors?.['required']">
                    Заполните пустое поле</p>
            </span>
            <label for="event-time">Время напоминания</label>
            <input class="form__event-date" name="event-time" type="time" formControlName="endTime">
            <span class="form__validation-message">
                <p
                    *ngIf="todoService.taskForm.controls['endTime'].touched && todoService.taskForm.controls['endTime'].errors?.['required']">
                    Заполните пустое поле</p>
            </span>
        </div>

    </fieldset>
    <!-- Поля для вкладки Тегов -->
    <fieldset class="form__tag-input" *ngIf="todoService.currentPage === 'tags'">
        <label for="tag-name">Тег</label>
        <input class="form__tag-name" name="tag-name" type="text" formControlName="tag">
        <span class="form__validation-message">
            <p *ngIf="todoService.taskForm.controls['tag'].errors?.['pattern']">
                Недопустимые символы. Проверьте еще раз.</p>
            <p
                *ngIf="todoService.taskForm.controls['tag'].touched && todoService.taskForm.controls['tag'].errors?.['required']">
                Заполните пустое поле</p>
            <p
                *ngIf="todoService.taskForm.controls['tag'].touched && todoService.taskForm.controls['tag'].errors?.['minlength'] && (todoService.taskForm.controls['tag'].dirty)">
                Нужно ввести минимум 2 символа</p>
        </span>
    </fieldset>
    <!-- Поля для вкладки Событий -->
    <fieldset class="form__date-time-inputs" *ngIf="todoService.currentPage === 'events'">
        <label for="event-name">Название события</label>
        <input class="form__event-name" name="event-name" type="text" formControlName="event">
        <span class="form__validation-message">
            <p *ngIf="todoService.taskForm.controls['event'].errors?.['pattern']">
                Недопустимые символы. Проверьте еще раз.</p>
            <p
                *ngIf="todoService.taskForm.controls['event'].touched && todoService.taskForm.controls['event'].errors?.['required']">
                Заполните пустое поле</p>
            <p
                *ngIf="todoService.taskForm.controls['event'].touched && todoService.taskForm.controls['event'].errors?.['minlength'] && (todoService.taskForm.controls['event'].dirty)">
                Нужно ввести минимум 5 символов</p>
        </span>

        <label for="event-date">Дата напоминания</label>
        <input class="form__event-date" name="event-date" type="date" formControlName="endDate">
        <span class="form__validation-message">
            <p
                *ngIf="todoService.taskForm.controls['endDate'].touched && todoService.taskForm.controls['endDate'].errors?.['required']">
                Заполните пустое поле</p>
        </span>
        <label for="event-time">Время напоминания</label>
        <input class="form__event-date" name="event-time" type="time" formControlName="endTime">
        <span class="form__validation-message">
            <p
                *ngIf="todoService.taskForm.controls['endTime'].touched && todoService.taskForm.controls['endTime'].errors?.['required']">
                Заполните пустое поле</p>
        </span>
    </fieldset>
    <div class="form__menu-buttons">
        <button class="small-btn"
            (click)="todoService.toggleFormVisible(); todoService.setCurrentPageName('')">Отмена</button>
        <button class="small-btn" *ngIf="todoService.currentPage === 'events'" [disabled]="!todoService.taskForm.valid"
            (click)="todoService.addEvent(); todoService.toggleFormVisible()">Сохранить</button>
        <button class="small-btn" *ngIf="todoService.currentPage === 'tags'" [disabled]="!todoService.taskForm.valid"
            (click)="todoService.addTag(); todoService.toggleFormVisible()">Сохранить</button>
        <button class="small-btn" *ngIf="todoService.currentPage === 'tasks'" [disabled]="!todoService.taskForm.valid"
            (click)="todoService.setTask(); todoService.toggleFormVisible()">Сохранить</button>
    </div>
</form>